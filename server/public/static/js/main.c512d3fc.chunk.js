(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1011:function(e,t,a){"use strict";a.r(t);var n=a(4),o=a.n(n),s=a(922),r=a.n(s),l=(a(931),a(134)),i=a(74),c=a(92),d=a(94),u=a(93),m=a(95),h=a(119),p=a(290),v=a.n(p),g=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e,a){return t.service.post("signup",{username:e,password:a}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("login",{username:e,password:a}).then(function(e){return e.data})},this.logout=function(){return t.service.post("logout",{}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("loggedin").then(function(e){return e.data})},this.service=v.a.create({baseURL:"https://u-voice.herokuapp.com/api/",withCredentials:!0})},f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).logout=function(){a.service.logout().then(function(e){a.props.setTheUser(null)})},a.service=new g,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.userInSession?o.a.createElement("div",{className:"navBar"},o.a.createElement("div",{className:"logo"},o.a.createElement("svg",{id:"logo","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 37.05 11.32"},o.a.createElement("defs",null,o.a.createElement("style",null,".cls-1","fill:none;stroke:#12f70a;stroke-width:0.4px;")),o.a.createElement("title",null,"logo"),o.a.createElement("path",{className:"cls-1",d:"M7.55,3C8,1.93,8.5.64,7.53.25v0H9.87L5.72,11c-1.1-.72-1.46-.85-1.92-2.09L1.43,2.5A4.71,4.71,0,0,0,.2.25v0H2.5l0,.19a6.4,6.4,0,0,0,.42,1.46l2.5,6.84Z"}),o.a.createElement("path",{className:"cls-1",d:"M9.39,7a3.92,3.92,0,0,1,4.17-3.88,3.77,3.77,0,0,1,3.92,3.74,4,4,0,0,1-4.11,3.9A3.8,3.8,0,0,1,9.39,7Zm6.5.19c0-1.53-.82-3-2.5-3A2.41,2.41,0,0,0,11,6.71c0,1.45.87,3,2.47,3A2.41,2.41,0,0,0,15.89,7.18Z"}),o.a.createElement("path",{className:"cls-1",d:"M19.32,3.31a1.51,1.51,0,0,0,1-.25h0V8.8c0,.72-.09,1.3.6,1.7v0H18.36v0c.69-.39.6-1,.6-1.7V5c0-.72.09-1.29-.6-1.68v0Zm.3-.94a1,1,0,0,1-1-1,1,1,0,0,1,1-.93,1,1,0,0,1,.94,1A1,1,0,0,1,19.62,2.37Z"}),o.a.createElement("path",{className:"cls-1",d:"M28.14,4.92h0a2.58,2.58,0,0,0-1.92-.77,2.5,2.5,0,0,0-2.63,2.56,3.09,3.09,0,0,0,3.27,3,4.07,4.07,0,0,0,2.3-.77h0l-.82,1.49a5.85,5.85,0,0,1-2.08.31C23.85,10.75,22,9.17,22,7.12c0-2.7,2.11-4,4.48-4a7.68,7.68,0,0,1,1.7.19Z"}),o.a.createElement("path",{className:"cls-1",d:"M30.95,6.68a2.94,2.94,0,0,0,3.15,3,4.15,4.15,0,0,0,2.58-.83h0l-.79,1.48a5.66,5.66,0,0,1-2.17.39c-2.67,0-4.51-1.68-4.51-3.87a3.69,3.69,0,0,1,3.93-3.77,3.38,3.38,0,0,1,3.54,3.57Zm4.12-.91a1.81,1.81,0,0,0-2-1.62,2,2,0,0,0-2,1.62Z"}))),o.a.createElement("div",{className:"waves"},o.a.createElement("svg",{id:"wave","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 38.05"},o.a.createElement("title",null,"Audio Wave"),o.a.createElement("path",{id:"Line_1","data-name":"Line 1",d:"M0.91,15L0.78,15A1,1,0,0,0,0,16v6a1,1,0,1,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H0.91Z"}),o.a.createElement("path",{id:"Line_2","data-name":"Line 2",d:"M6.91,9L6.78,9A1,1,0,0,0,6,10V28a1,1,0,1,0,2,0s0,0,0,0V10A1,1,0,0,0,7,9H6.91Z"}),o.a.createElement("path",{id:"Line_3","data-name":"Line 3",d:"M12.91,0L12.78,0A1,1,0,0,0,12,1V37a1,1,0,1,0,2,0s0,0,0,0V1a1,1,0,0,0-1-1H12.91Z"}),o.a.createElement("path",{id:"Line_4","data-name":"Line 4",d:"M18.91,10l-0.12,0A1,1,0,0,0,18,11V27a1,1,0,1,0,2,0s0,0,0,0V11a1,1,0,0,0-1-1H18.91Z"}),o.a.createElement("path",{id:"Line_5","data-name":"Line 5",d:"M24.91,15l-0.12,0A1,1,0,0,0,24,16v6a1,1,0,0,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H24.91Z"}),o.a.createElement("path",{id:"Line_6","data-name":"Line 6",d:"M30.91,10l-0.12,0A1,1,0,0,0,30,11V27a1,1,0,1,0,2,0s0,0,0,0V11a1,1,0,0,0-1-1H30.91Z"}),o.a.createElement("path",{id:"Line_7","data-name":"Line 7",d:"M36.91,0L36.78,0A1,1,0,0,0,36,1V37a1,1,0,1,0,2,0s0,0,0,0V1a1,1,0,0,0-1-1H36.91Z"}),o.a.createElement("path",{id:"Line_8","data-name":"Line 8",d:"M42.91,9L42.78,9A1,1,0,0,0,42,10V28a1,1,0,1,0,2,0s0,0,0,0V10a1,1,0,0,0-1-1H42.91Z"}),o.a.createElement("path",{id:"Line_9","data-name":"Line 9",d:"M48.91,15l-0.12,0A1,1,0,0,0,48,16v6a1,1,0,1,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H48.91Z"}))),o.a.createElement("div",{className:"logout-btn link",onClick:this.logout},"log out"),o.a.createElement("div",{className:"link"},o.a.createElement(h.b,{to:"/post"},"Post"))):o.a.createElement("div",{className:"navBar"},o.a.createElement("div",{className:"logo"},o.a.createElement("svg",{id:"logo","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 37.05 11.32"},o.a.createElement("defs",null,o.a.createElement("style",null,".cls-1","fill:none;stroke:#12f70a;stroke-width:0.4px;")),o.a.createElement("title",null,"logo"),o.a.createElement("path",{className:"cls-1",d:"M7.55,3C8,1.93,8.5.64,7.53.25v0H9.87L5.72,11c-1.1-.72-1.46-.85-1.92-2.09L1.43,2.5A4.71,4.71,0,0,0,.2.25v0H2.5l0,.19a6.4,6.4,0,0,0,.42,1.46l2.5,6.84Z"}),o.a.createElement("path",{className:"cls-1",d:"M9.39,7a3.92,3.92,0,0,1,4.17-3.88,3.77,3.77,0,0,1,3.92,3.74,4,4,0,0,1-4.11,3.9A3.8,3.8,0,0,1,9.39,7Zm6.5.19c0-1.53-.82-3-2.5-3A2.41,2.41,0,0,0,11,6.71c0,1.45.87,3,2.47,3A2.41,2.41,0,0,0,15.89,7.18Z"}),o.a.createElement("path",{className:"cls-1",d:"M19.32,3.31a1.51,1.51,0,0,0,1-.25h0V8.8c0,.72-.09,1.3.6,1.7v0H18.36v0c.69-.39.6-1,.6-1.7V5c0-.72.09-1.29-.6-1.68v0Zm.3-.94a1,1,0,0,1-1-1,1,1,0,0,1,1-.93,1,1,0,0,1,.94,1A1,1,0,0,1,19.62,2.37Z"}),o.a.createElement("path",{className:"cls-1",d:"M28.14,4.92h0a2.58,2.58,0,0,0-1.92-.77,2.5,2.5,0,0,0-2.63,2.56,3.09,3.09,0,0,0,3.27,3,4.07,4.07,0,0,0,2.3-.77h0l-.82,1.49a5.85,5.85,0,0,1-2.08.31C23.85,10.75,22,9.17,22,7.12c0-2.7,2.11-4,4.48-4a7.68,7.68,0,0,1,1.7.19Z"}),o.a.createElement("path",{className:"cls-1",d:"M30.95,6.68a2.94,2.94,0,0,0,3.15,3,4.15,4.15,0,0,0,2.58-.83h0l-.79,1.48a5.66,5.66,0,0,1-2.17.39c-2.67,0-4.51-1.68-4.51-3.87a3.69,3.69,0,0,1,3.93-3.77,3.38,3.38,0,0,1,3.54,3.57Zm4.12-.91a1.81,1.81,0,0,0-2-1.62,2,2,0,0,0-2,1.62Z"}))),o.a.createElement("div",{className:"waves"},o.a.createElement("svg",{id:"wave","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 38.05"},o.a.createElement("title",null,"Audio Wave"),o.a.createElement("path",{id:"Line_1","data-name":"Line 1",d:"M0.91,15L0.78,15A1,1,0,0,0,0,16v6a1,1,0,1,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H0.91Z"}),o.a.createElement("path",{id:"Line_2","data-name":"Line 2",d:"M6.91,9L6.78,9A1,1,0,0,0,6,10V28a1,1,0,1,0,2,0s0,0,0,0V10A1,1,0,0,0,7,9H6.91Z"}),o.a.createElement("path",{id:"Line_3","data-name":"Line 3",d:"M12.91,0L12.78,0A1,1,0,0,0,12,1V37a1,1,0,1,0,2,0s0,0,0,0V1a1,1,0,0,0-1-1H12.91Z"}),o.a.createElement("path",{id:"Line_4","data-name":"Line 4",d:"M18.91,10l-0.12,0A1,1,0,0,0,18,11V27a1,1,0,1,0,2,0s0,0,0,0V11a1,1,0,0,0-1-1H18.91Z"}),o.a.createElement("path",{id:"Line_5","data-name":"Line 5",d:"M24.91,15l-0.12,0A1,1,0,0,0,24,16v6a1,1,0,0,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H24.91Z"}),o.a.createElement("path",{id:"Line_6","data-name":"Line 6",d:"M30.91,10l-0.12,0A1,1,0,0,0,30,11V27a1,1,0,1,0,2,0s0,0,0,0V11a1,1,0,0,0-1-1H30.91Z"}),o.a.createElement("path",{id:"Line_7","data-name":"Line 7",d:"M36.91,0L36.78,0A1,1,0,0,0,36,1V37a1,1,0,1,0,2,0s0,0,0,0V1a1,1,0,0,0-1-1H36.91Z"}),o.a.createElement("path",{id:"Line_8","data-name":"Line 8",d:"M42.91,9L42.78,9A1,1,0,0,0,42,10V28a1,1,0,1,0,2,0s0,0,0,0V10a1,1,0,0,0-1-1H42.91Z"}),o.a.createElement("path",{id:"Line_9","data-name":"Line 9",d:"M48.91,15l-0.12,0A1,1,0,0,0,48,16v6a1,1,0,1,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H48.91Z"}))),o.a.createElement("div",{className:"login link"},o.a.createElement(h.b,{to:"/login"},"Log In")))}}]),t}(n.Component),E=a(135),w=a(158),b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,o=t.value;a.setState(Object(l.a)({},n,o))},a.handleClose=function(){return a.setState({show:!1,redirect:!0})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,o=t.password;a.services.signup(n,o).then(function(e){a.setState({redirect:!0},function(){a.props.setTheUser(e)})}).catch(function(e){a.setState({error:e.response.data.message}),console.log("Este es el error",e.response.data.message)})},a.validation=function(){if(a.state.error)return o.a.createElement("p",{className:"error"},a.state.error)},a.state={username:"",password:"",error:!1,redirect:!1,movein:!1},a.services=new g,a.handleClose=a.handleClose.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval(function(){return e.setState({movein:!e.state.loading})},100)}},{key:"render",value:function(){return o.a.createElement("div",{className:"loginContainer"},this.state.redirect?o.a.createElement(w.a,{to:"/"}):null,o.a.createElement("div",{className:"loginForm ".concat(this.state.movein?"move-in-right":""," col")},o.a.createElement("button",{className:"btn-close",onClick:this.handleClose},"Close"),o.a.createElement("form",{onSubmit:this.handleSubmit,className:"login"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"username"}),o.a.createElement("input",{onChange:this.handleChange,value:this.state.username,type:"text",className:"form-control",id:"username",name:"username",placeholder:"Username"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password"}),o.a.createElement("input",{onChange:this.handleChange,value:this.state.password,type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password"})),this.validation(),o.a.createElement("button",{type:"submit",className:"form-group row btn-access"}),o.a.createElement(h.b,{to:"/login",className:"form-group SignupLink row"},"Back to Log in"))))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){console.log(e);var t=e.target,n=t.name,o=t.value;a.setState(Object(l.a)({},n,o))},a.handleClose=function(){return a.setState({show:!1,redirect:!0})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,o=t.password;a.services.login(n,o).then(function(e){a.setState({redirect:!0},function(){a.props.setTheUser(e)})}).catch(function(e){console.log(e),a.setState({error:e.response.data.message})})},a.validation=function(){if(a.state.error)return o.a.createElement("p",{className:"error"},a.state.error)},a.state={username:"",password:"",movein:!1,error:!1},a.services=new g,a.handleClose=a.handleClose.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval(function(){return e.setState({movein:!e.state.loading})},100)}},{key:"render",value:function(){return o.a.createElement("div",{className:"loginContainer"},this.state.redirect?o.a.createElement(w.a,{to:"/"}):null,o.a.createElement("div",{className:"loginForm ".concat(this.state.movein?"move-in-right":""," col")},o.a.createElement("button",{className:"btn-close",onClick:this.handleClose},"Close"),o.a.createElement("form",{onSubmit:this.handleSubmit,className:"login"},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"username"}),o.a.createElement("input",{onChange:this.handleChange,value:this.state.username,type:"text",className:"form-control",id:"username",name:"username",placeholder:"Username"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password"}),o.a.createElement("input",{onChange:this.handleChange,value:this.state.password,type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password"})),this.validation(),o.a.createElement("button",{type:"submit",className:"form-group row btn-access"}),o.a.createElement(h.b,{to:"/signup",className:"form-group SignupLink row"},"If you don\xb4t have an account Sign Up"))))}}]),t}(n.Component),y=a(925),N=a(195),C=a(159),M={stiffness:60,damping:15},O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleMouseMove=function(e){var t=e.pageX,n=e.pageY;a.setState(function(){return{mouse:[t-25,n-25],now:"t"+Date.now()}})},a.handleTouchMove=function(e){e.preventDefault(),a.handleMouseMove(e.touches[0])},a.willLeave=function(e){return Object(N.a)({},e.style,{opacity:Object(C.spring)(0,M),scale:Object(C.spring)(2,M)})},a.state={mouse:[],now:"t0"},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=Object(y.a)(t.mouse,2),n=a[0],s=a[1],r=t.now,l=null==n?[]:[{key:r,style:{opacity:Object(C.spring)(1),scale:Object(C.spring)(0),x:Object(C.spring)(n),y:Object(C.spring)(s)}}];return o.a.createElement("header",{className:"intro-bg col"},o.a.createElement(C.TransitionMotion,{willLeave:this.willLeave,styles:l},function(t){return o.a.createElement("div",{onMouseMove:e.handleMouseMove,onTouchMove:e.handleTouchMove,className:"demo7"},t.map(function(e){var t=e.key,a=e.style,n=a.opacity,s=a.scale,r=a.x,l=a.y;return o.a.createElement("div",{key:t,className:"demo7-ball",style:{opacity:n,scale:s,transform:"translate3d(".concat(r,"px, ").concat(l,"px, 0) scale(").concat(s,")"),WebkitTransform:"translate3d(".concat(r,"px, ").concat(l,"px, 0) scale(").concat(s,")")}})}))}),o.a.createElement("div",{className:"logo-intro"},o.a.createElement("svg",{id:"logo-intro","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 37.05 11.32"},o.a.createElement("defs",null,o.a.createElement("style",null,".cls-1","fill:none;stroke:#12f70a;stroke-width:0.4px;")),o.a.createElement("title",null,"logo"),o.a.createElement("path",{className:"cls-1",d:"M7.55,3C8,1.93,8.5.64,7.53.25v0H9.87L5.72,11c-1.1-.72-1.46-.85-1.92-2.09L1.43,2.5A4.71,4.71,0,0,0,.2.25v0H2.5l0,.19a6.4,6.4,0,0,0,.42,1.46l2.5,6.84Z"}),o.a.createElement("path",{className:"cls-1",d:"M9.39,7a3.92,3.92,0,0,1,4.17-3.88,3.77,3.77,0,0,1,3.92,3.74,4,4,0,0,1-4.11,3.9A3.8,3.8,0,0,1,9.39,7Zm6.5.19c0-1.53-.82-3-2.5-3A2.41,2.41,0,0,0,11,6.71c0,1.45.87,3,2.47,3A2.41,2.41,0,0,0,15.89,7.18Z"}),o.a.createElement("path",{className:"cls-1",d:"M19.32,3.31a1.51,1.51,0,0,0,1-.25h0V8.8c0,.72-.09,1.3.6,1.7v0H18.36v0c.69-.39.6-1,.6-1.7V5c0-.72.09-1.29-.6-1.68v0Zm.3-.94a1,1,0,0,1-1-1,1,1,0,0,1,1-.93,1,1,0,0,1,.94,1A1,1,0,0,1,19.62,2.37Z"}),o.a.createElement("path",{className:"cls-1",d:"M28.14,4.92h0a2.58,2.58,0,0,0-1.92-.77,2.5,2.5,0,0,0-2.63,2.56,3.09,3.09,0,0,0,3.27,3,4.07,4.07,0,0,0,2.3-.77h0l-.82,1.49a5.85,5.85,0,0,1-2.08.31C23.85,10.75,22,9.17,22,7.12c0-2.7,2.11-4,4.48-4a7.68,7.68,0,0,1,1.7.19Z"}),o.a.createElement("path",{className:"cls-1",d:"M30.95,6.68a2.94,2.94,0,0,0,3.15,3,4.15,4.15,0,0,0,2.58-.83h0l-.79,1.48a5.66,5.66,0,0,1-2.17.39c-2.67,0-4.51-1.68-4.51-3.87a3.69,3.69,0,0,1,3.93-3.77,3.38,3.38,0,0,1,3.54,3.57Zm4.12-.91a1.81,1.81,0,0,0-2-1.62,2,2,0,0,0-2,1.62Z"}))),o.a.createElement("p",null,"Record and share your voice to the world"),o.a.createElement("div",null,o.a.createElement("svg",{id:"wave","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 38.05"},o.a.createElement("title",null,"Audio Wave"),o.a.createElement("path",{id:"Line_1","data-name":"Line 1",d:"M0.91,15L0.78,15A1,1,0,0,0,0,16v6a1,1,0,1,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H0.91Z"}),o.a.createElement("path",{id:"Line_2","data-name":"Line 2",d:"M6.91,9L6.78,9A1,1,0,0,0,6,10V28a1,1,0,1,0,2,0s0,0,0,0V10A1,1,0,0,0,7,9H6.91Z"}),o.a.createElement("path",{id:"Line_3","data-name":"Line 3",d:"M12.91,0L12.78,0A1,1,0,0,0,12,1V37a1,1,0,1,0,2,0s0,0,0,0V1a1,1,0,0,0-1-1H12.91Z"}),o.a.createElement("path",{id:"Line_4","data-name":"Line 4",d:"M18.91,10l-0.12,0A1,1,0,0,0,18,11V27a1,1,0,1,0,2,0s0,0,0,0V11a1,1,0,0,0-1-1H18.91Z"}),o.a.createElement("path",{id:"Line_5","data-name":"Line 5",d:"M24.91,15l-0.12,0A1,1,0,0,0,24,16v6a1,1,0,0,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H24.91Z"}),o.a.createElement("path",{id:"Line_6","data-name":"Line 6",d:"M30.91,10l-0.12,0A1,1,0,0,0,30,11V27a1,1,0,1,0,2,0s0,0,0,0V11a1,1,0,0,0-1-1H30.91Z"}),o.a.createElement("path",{id:"Line_7","data-name":"Line 7",d:"M36.91,0L36.78,0A1,1,0,0,0,36,1V37a1,1,0,1,0,2,0s0,0,0,0V1a1,1,0,0,0-1-1H36.91Z"}),o.a.createElement("path",{id:"Line_8","data-name":"Line 8",d:"M42.91,9L42.78,9A1,1,0,0,0,42,10V28a1,1,0,1,0,2,0s0,0,0,0V10a1,1,0,0,0-1-1H42.91Z"}),o.a.createElement("path",{id:"Line_9","data-name":"Line 9",d:"M48.91,15l-0.12,0A1,1,0,0,0,48,16v6a1,1,0,1,0,2,0s0,0,0,0V16a1,1,0,0,0-1-1H48.91Z"}))))}}]),t}(n.Component),S=function e(){var t=this;Object(i.a)(this,e),this.postPost=function(e){return t.service.post("post",e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.getAllPosts=function(){return t.service.get("getAllPosts",{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return console.log("Error",e)})},this.handleUpload=function(e){return t.service.post("upload",e,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}).then(function(e){return console.log("AUDIO FILE UPLOADED"),console.log(e),e.data}).catch(function(e){return console.log(e)})},this.service=v.a.create({baseURL:"https://u-voice.herokuapp.com/api/"})},A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handlerFunction=function(e){a.setState({rec:new MediaRecorder(e)}),a.state.rec.ondataavailable=function(e){if(a.state.audioChunks.push(e.data),"inactive"===a.state.rec.state){var t=new Blob(a.state.audioChunks,{type:"audio/mpeg-3"}),n=document.getElementById("recordedAudio");n.src=URL.createObjectURL(t),n.controls=!0,n.autoplay=!0,a.sendFileToCloudinary(t)}}},a.rec=function(e){e.preventDefault();document.getElementById("record"),document.getElementById("stopRecord");console.log("I was clicked"),a.state.rec.start(),a.setState({pulse:!0})},a.stop=function(e){e.preventDefault();document.getElementById("record"),document.getElementById("stopRecord");console.log("I was clicked"),a.state.rec.stop(),a.setState({pulse:!1})},a.sendFileToCloudinary=function(e){console.log(e),console.log("se envia ahora a cloudi"),a.setState({url:e}),a.props.handleFileUpload(e)},a.state={audioChunks:[],rec:void 0,recordedAudio:void 0,record:void 0,stop:void 0,url:"",pulse:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){e.handlerFunction(t)})}},{key:"render",value:function(){return o.a.createElement("div",{className:"mic-container"},o.a.createElement("p",null,o.a.createElement("button",{id:"record",className:"voice-recording-btn ".concat(this.state.pulse?"pulse-rec":""),title:"Start recording",onClick:this.rec}),o.a.createElement("button",{id:"stopRecord",className:"stop-voice-recording-btn",title:"Stop recording",onClick:this.stop})),o.a.createElement("p",null,o.a.createElement("audio",{controls:!0,id:"recordedAudio"})))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleFileUpload=function(e){console.log("This is the Blob ",e);var t=new FormData;t.append("blob",e),a.services.handleUpload(t).then(function(e){console.log(e.secure_url),a.setState({postform:Object(N.a)({},a.state.postform,{audio:e.secure_url})}),console.log(a.state.postform)}).catch(function(e){return console.log(e)})},a.handleClose=function(){return a.setState({show:!1,redirect:!0})},a.handleShow=function(){return a.setState({show:!0})},a.handlechange=function(e){var t=e.target,n=t.name,o=t.value;a.setState({postform:Object(N.a)({},a.state.postform,Object(l.a)({},n,o))})},a.setPost=function(e){return a.setState({postform:e})},a.handleSubmit=function(e){e.preventDefault(),a.services.postPost(a.state.postform).then(function(e){a.props.loadPointsFromSon(),a.setState({redirect:!0},function(){a.setPost(e),console.log("Post Submited!")})}).catch(function(e){return console.log(e)})},a.state={postform:{type:"Point",longitude:0,latitude:0,description:"",audio:"",color:""},show:!0,movein:!1,error:!1},a.services=new S,a.handleShow=a.handleShow.bind(Object(E.a)(a)),a.handleClose=a.handleClose.bind(Object(E.a)(a)),a.getMyLocation=a.getMyLocation.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval(function(){return e.setState({movein:!e.state.loading})},100)}},{key:"getMyLocation",value:function(){var e=this,t=window.navigator&&window.navigator.geolocation;t&&t.getCurrentPosition(function(t){e.setState({postform:Object(N.a)({},e.state.postform,{latitude:t.coords.latitude,longitude:t.coords.longitude})})},function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.state.redirect?o.a.createElement(w.a,{to:"/"}):null,o.a.createElement("div",{className:"post-container col ".concat(this.state.movein?"move-in-right":"")},o.a.createElement("form",{className:"col",onSubmit:this.handleSubmit},o.a.createElement("div",{className:"post-form-it description"},o.a.createElement("label",{className:"description-title",htmlFor:"description"}),o.a.createElement("input",{onChange:function(t){return e.handlechange(t)},value:this.state.postform.description,type:"text",className:"row",id:"description",name:"description",placeholder:"Write a description"})),o.a.createElement("button",{className:"post-form-it geolocation-btn  row",type:"button",onClick:this.getMyLocation,title:"Get my location"}),o.a.createElement(A,{className:"post-form-it mic-container  row",handleFileUpload:function(t){return e.handleFileUpload(t)}}),this.state.postform.audio&&o.a.createElement("div",{className:"row"},o.a.createElement("button",{title:"Submit",type:"submit",className:"btn-post post-form-it row"}))),o.a.createElement("button",{className:"btn-close",onClick:this.handleClose},"Close")))}}]),t}(n.Component),k=a(5),Z=a.n(k),V=a(156),I=a.n(V),U=a(231),x=a.n(U),H=a(9),_=a.n(H),P=a(431),D=a.n(P),T=a(289),B=a.n(T);x.a.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJmODFhMmExZS1jZDAwLTRlNjctYmY1MS04OWIzNzZmOTA4ZmIiLCJpZCI6MTE4OTgsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NTk5MTgwODJ9.jtqbFIAPLfshQhRKW5VKU5qOSs682b446jPKo5ca2MA";var F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).setUser=function(e){return a.setState({loggedInUser:e})},a.fetchUser=function(){null===a.state.loggedInUser&&a.servicesAuth.loggedin().then(function(e){a.setState({loggedInUser:e})}).catch(function(e){return a.setState({loggedInUser:!1})})},a.loadPointsFromSon=function(){a.services.getAllPosts().then(function(e){a.setState({data:e}),console.log(a.state.data[a.state.data.length-1]),a.viewer.entities.removeAll(),a.loadPoints(a.state.data)}).catch(function(e){return console.log(e)})},a.loadPoints=function(e){e.forEach(function(e){var t=e.longitude;console.log(e.long);var n=e.latitude;console.log(e.lat);var o=a.viewer.entities.add({position:Z.a.fromDegrees(t,n),point:{show:!0,color:_.a.SPRINGGREEN,pixelSize:5,outlineColor:_.a.SPRINGGREEN,outlineWidth:3},description:"<h3 style='max-height: 648px; height: 60px;color: grey; text-align: center'>".concat(e.description,"</h3>")});a.viewer.scene.pickTranslucentDepth=!0,new I.a(a.viewer.scene.canvas).setInputAction(function(t){var n=a.viewer.scene.pick(t.position);if(x.a.defined(n)&&n.id===o){o.point.pixelSize=10,console.log(n),console.log(e.audio),console.log(e.description);var s=new Audio;s.src=e.audio,s.muted=!0,console.log(s),s.play(),new Audio(e.audio).play();s.play().then(function(e){return console.log("Se ha reproducido")}).catch(function(e){console.log(e),console.log(s),s.play()})}else o.point.pixelSize=5;a.viewer.scene.requestRender()},x.a.ScreenSpaceEventType.LEFT_CLICK)})},a.state={appear:!0,loggedInUser:null,viewerLoaded:!1,query:"",data:[]},a.servicesAuth=new g,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.appear&&setTimeout(function(){return e.setState({appear:!1})},6e3),this.setState({viewerLoaded:!0}),this.viewer=new D.a(this.cesiumContainer,{animation:!1,baseLayerPicker:!1,fullscreenButton:!1,useDepthPicking:!0,geocoder:!1,homeButton:!1,infoBox:!0,sceneModePicker:!1,requestRenderMode:!0,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,scene3DOnly:!0,skyBox:new B.a({show:!1})}),this.viewer.scene.highDynamicRange=!1,this.viewer.scene.backgroundColor=x.a.Color.BLANCHEDALMOND,this.viewer.scene.skyAtmosphere.show=!1,this.viewer.scene.globe.showGroundAtmosphere=!0,this.viewer.scene.moon.show=!1,this.viewer.scene.sun.show=!1,this.services=new S,this.services.getAllPosts().then(function(t){e.setState({data:t}),e.loadPoints(e.state.data),e.handleChange=function(t){var a=t.target,n=a.name,o=a.value;e.setState(Object(l.a)({},n,o));var s=e.state.data.filter(function(e){return e.description.toLowerCase().includes(t.target.value.toLowerCase())});e.viewer.entities.removeAll(),console.log(t.target.value),console.log("Data filtered: ",s),t.target.value.length>0?e.loadPoints(s):e.loadPoints(e.state.data),e.viewer.scene.requestRender()}}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t={width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"fixed",display:"flex",alignItems:"stretch"},a={flexGrow:2};return this.fetchUser(),this.state.loggedInUser?o.a.createElement("main",null,!this.state.appear,o.a.createElement("div",{className:"cesiumGlobeWrapper",style:t},o.a.createElement("div",{className:"cesiumWidget",ref:function(t){return e.cesiumContainer=t},style:a}),o.a.createElement("form",{className:"SearchBar"},o.a.createElement("input",{className:"SearchBarInput",type:"text",name:"query",value:this.state.query,onChange:function(t){return e.handleChange(t)},placeholder:"Search..."}))),o.a.createElement(f,{userInSession:this.state.loggedInUser,setTheUser:this.setUser}),o.a.createElement(w.d,null,o.a.createElement(w.b,{path:"/post",render:function(){return o.a.createElement(j,{loadPointsFromSon:e.loadPointsFromSon,setTheUser:e.setUser})}}))):o.a.createElement("main",null,this.state.appear&&o.a.createElement(O,null),o.a.createElement("div",{className:"cesiumGlobeWrapper",style:t},o.a.createElement("div",{className:"cesiumWidget",ref:function(t){return e.cesiumContainer=t},style:a},o.a.createElement("form",{className:"SearchBar"},o.a.createElement("input",{className:"SearchBarInput",type:"text",name:"query",value:this.state.query,onChange:function(t){return e.handleChange(t)},placeholder:"Search..."})))),o.a.createElement(f,{userInSession:this.state.loggedInUser,setTheUser:this.setUser}),o.a.createElement("div",{className:"footer"}),o.a.createElement(w.d,null,o.a.createElement(w.b,{path:"/signup",render:function(){return o.a.createElement(b,{setTheUser:e.setUser})}}),o.a.createElement(w.b,{path:"/login",render:function(){return o.a.createElement(L,{setTheUser:e.setUser})}})))}}]),t}(n.Component);r.a.render(o.a.createElement(h.a,null,o.a.createElement(F,null)),document.getElementById("root"))},307:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=307},926:function(e,t,a){e.exports=a(1011)},931:function(e,t,a){}},[[926,1,2]]]);
//# sourceMappingURL=main.c512d3fc.chunk.js.map